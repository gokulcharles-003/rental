<header class="app-header">
    <h1>Property Management System</h1>
    <nav>
        <a routerLink="/owner" class="nav-btn">Dashboard</a>
        <a routerLink="payments" class="nav-btn">Payments</a>
        <a routerLink="/home" class="nav-btn">Logout</a>
    </nav>
</header>
<section id="tenant" class="section">
    <h3 style="text-align:center; margin-top: 20px; margin-bottom: 32px;">Applications</h3>
    <div class="application-card-row">
        <div *ngFor="let app of applications" class="application-card">
            <div class="application-details">
                <div><strong>Name:</strong> {{app.tenantName}}</div>
                <div><strong>Email:</strong> {{app.tenantEmail}}</div>
                <div><strong>Mobile:</strong> {{app.tenantMobile}}</div>
                <div><strong>Property ID:</strong> {{app.propertyId}}</div>
                <div><strong>Property Name:</strong> {{app.propertyName}}</div>
                <div><strong>Status:</strong> 
                    <span [ngClass]="{
                        'pending-status': app.status === 'Pending',
                        'accepted-status': app.status === 'Accepted',
                        'rejected-status': app.status === 'Rejected'
                    }">{{app.status}}</span>
                </div>
            </div>
            <div class="application-actions">
                <ng-container [ngSwitch]="app.action">
                    <ng-container *ngSwitchCase="'pending'">
                        <button class="accept-btn" (click)="openLeaseModal(app)">Accept</button>
                        <button class="reject-btn" (click)="reject(app)">Reject</button>
                    </ng-container>
                    <ng-container *ngSwitchCase="'accepted'">
                        <button class="accepted accept-btn" disabled >Accepted</button>
                    </ng-container>
                    <ng-container *ngSwitchCase="'rejected'">
                        <button class="rejected reject-btn" disabled >Rejected</button>
                    </ng-container>
                </ng-container>
            </div>
        </div>
    </div>

    <!-- Lease Agreement Modal -->
    <div class="modal" *ngIf="showLeaseModal">
      <div class="modal-content edit-form">
        <div class="edit-form-header">
          <h3>Lease Agreement</h3>
          <span class="close-btn" (click)="closeLeaseModal()">&times;</span>
        </div>
        <form (submit)="sendLease()">
          <label>Property</label>
          <select [(ngModel)]="lease.propertyId" name="propertyId" required>
            <option value="" disabled>Select Property</option>
            <option *ngFor="let p of properties" [value]="p.id">{{p.label}}</option>
          </select>

          <label>Tenant</label>
          <select [(ngModel)]="lease.tenantId" name="tenantId" required>
            <option value="" disabled>Select Tenant</option>
            <option *ngFor="let t of tenants" [value]="t.id">{{t.name}}</option>
          </select>

          <label>Start Date</label>
          <input type="date" [(ngModel)]="lease.startDate" name="startDate" required />

          <label>End Date</label>
          <input type="date" [(ngModel)]="lease.endDate" name="endDate" required />

          <label>Monthly Rent</label>
          <input type="number" [(ngModel)]="lease.monthlyRent" name="monthlyRent" required min="1" />

          <label>Security Deposit</label>
          <input type="number" [(ngModel)]="lease.securityDeposit" name="securityDeposit" min="0" />

          <label>Terms</label>
          <input [(ngModel)]="lease.terms" name="terms" required rows="3">

          <button type="submit">Send to Tenant</button>
        </form>
      </div>
    </div>
</section>